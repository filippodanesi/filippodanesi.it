---
import BaseHead from '../components/BaseHead.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import siteConfig from '../data/site-config';

export interface Props {
    title?: string;
    description?: string;
    image?: { src: string; alt: string };
    pageType?: 'website' | 'article';
    showHeader?: boolean;
}

const pathname = new URL(Astro.request.url).pathname;
const isHome = pathname === '/';

const {
    title,
    description = siteConfig.description,
    image = siteConfig.image,
    pageType = 'website',
    showHeader = true
} = Astro.props;

// Use the full title only on homepage
const pageTitle = isHome 
    ? "Filippo Danesi — Search Engine Optimization Expert"
    : title 
        ? `${title} — Filippo Danesi` 
        : siteConfig.title;
---

<!DOCTYPE html>
<html lang="en">
    <head>
        <BaseHead 
            title={pageTitle} 
            description={description} 
            image={image} 
            pageType={pageType} 
        />
        <slot name="head" />
    </head>
    <body class="bg-[rgb(var(--color-bg-main))]">
        {showHeader && <Header />}
        <main class="mx-auto max-w-3xl px-4 py-12 sm:px-8 sm:py-20">
            <slot />
        </main>
        <Footer />
    </body>
</html>